(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{271:function(e,t,a){e.exports=a(494)},494:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"fetchExpenses",function(){return O}),a.d(n,"deleteExpense",function(){return j}),a.d(n,"fetchTotals",function(){return k}),a.d(n,"fetchAggregate",function(){return N}),a.d(n,"fetchTypes",function(){return D}),a.d(n,"addType",function(){return S});a(272),a(273);var r=a(1),c=a.n(r),s=a(32),o=a.n(s),l=a(19),i=a(11),u=a(172),p=a(17),m=a(40),d=a(21),f=a(18),h=a(20),v=a(48),y=a(49),b=a(7),g=a.n(b),E=a(14),x=a(34),w=a.n(x),O=function(e,t,a){return function(){var n=Object(E.a)(g.a.mark(function n(r){var c;return g.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w.a.get("/api/expense/"+e+"/"+t,{params:{sortBy:a}});case 2:c=n.sent,r({type:"fetch_expenses",payload:c.data});case 4:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()},j=function(e){return function(){var t=Object(E.a)(g.a.mark(function t(a){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=5;break}return t.next=3,w.a.delete("/api/expense/"+e);case 3:t.next=6;break;case 5:console.log("No ID supplied to deleteExpense. Doing nothing");case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},k=function(e,t){return function(){var a=Object(E.a)(g.a.mark(function a(n){var r;return g.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,w.a.get("/api/expense/totals/"+e+"/"+t);case 2:r=a.sent,n({type:"fetch_totals",payload:r.data});case 4:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()},N=function(e,t){return function(){var a=Object(E.a)(g.a.mark(function a(n){var r;return g.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,w.a.get("/api/expense/aggregate/"+e+"/"+t);case 2:r=a.sent,n({type:"fetch_aggregate",payload:r.data});case 4:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()},D=function(){return function(){var e=Object(E.a)(g.a.mark(function e(t){var a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("/api/types");case 2:a=e.sent,t({type:"fetch_types",payload:a.data});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},S=function(e){return function(){var t=Object(E.a)(g.a.mark(function t(a){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=5;break}return t.next=3,w.a.put("/api/types",{name:e});case 3:t.next=6;break;case 5:console.log("No type name supplied to addType. Doing nothing");case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},C=a(58),T=a.n(C),M=function(e){function t(e){var a,n=e.month,r=e.year;return Object(p.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this))).state={month:n,year:r},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchTotals((new Date).getMonth()+1,(new Date).getFullYear())}},{key:"render",value:function(){return c.a.createElement("div",{className:"card col s12 m6 l6"},c.a.createElement("div",{className:"card-content"},c.a.createElement("div",null,c.a.createElement("div",{style:{display:"inline-block",width:"120px"}},"Total:"),c.a.createElement("div",{style:{textAlign:"right",width:"60px",display:"inline-block"}},new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(this.props.totals.total))),c.a.createElement("div",null,c.a.createElement("div",{style:{display:"inline-block",width:"120px"}},"Remaining:"),c.a.createElement("div",{style:{textAlign:"right",width:"60px",display:"inline-block"}},new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(this.props.totals.remaining)))))}}]),t}(r.Component);var _=Object(l.b)(function(e){return{totals:e.totals}},{fetchTotals:k})(M),A=function(e){function t(e){var a,n=e.month,r=e.year;return Object(p.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this))).openClose=function(){a.setState({open:!a.state.open})},a.renderAggregates=function(){return a.props.aggregate&&a.props.aggregate.length>0?a.props.aggregate.map(function(e){return c.a.createElement("div",{className:"col card s12 m4 l3",key:e._id},c.a.createElement("span",null,e._id),c.a.createElement("span",{className:"secondary-content red-text"},new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e.total)))}):""},a.state={month:n,year:r,open:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchAggregate((new Date).getMonth()+1,(new Date).getFullYear())}},{key:"render",value:function(){return c.a.createElement("div",{className:""},c.a.createElement("div",{id:"aggregateOpenClose",className:"small icon btn-flat",onClick:this.openClose},c.a.createElement("i",{className:"material-icons left"},this.state.open?"expand_more":"expand_less")),c.a.createElement("div",{className:this.state.open?"":"hide"},this.renderAggregates()))}}]),t}(r.Component);var Y=Object(l.b)(function(e){return{aggregate:e.aggregate}},{fetchAggregate:N})(A),F=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(d.a)(this,Object(f.a)(t).call(this))).componentDidMount=function(){e.props.fetchExpenses(e.state.month,e.state.year,e.state.sort)},e.formatDate=function(e){return new Date(Date.parse(e)).toDateString()},e.onDeleteExpense=function(){var t=Object(E.a)(g.a.mark(function t(a){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.deleteExpense(a);case 2:e.refresh(!0);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.nextMonth=Object(E.a)(g.a.mark(function t(){var a,n;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=-1,n=e.state.year,12===e.state.month?(a=1,n=e.state.year+1):a=e.state.month+1,t.next=5,e.setState({month:a,year:n,loading:!0});case 5:e.refresh(!0);case 6:case"end":return t.stop()}},t,this)})),e.previousMonth=Object(E.a)(g.a.mark(function t(){var a,n;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=-1,n=e.state.year,1===e.state.month?(a=12,n=e.state.year-1):a=e.state.month-1,t.next=5,e.setState({month:a,year:n,loading:!0});case 5:e.refresh(!0);case 6:case"end":return t.stop()}},t,this)})),e.sort=Object(E.a)(g.a.mark(function t(){var a;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.sortSelect.current.value,t.next=3,e.setState({sort:a,loading:!0});case 3:e.refresh(!1);case 4:case"end":return t.stop()}},t,this)})),e.refresh=function(){var t=Object(E.a)(g.a.mark(function t(a){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=5;break}return t.next=3,Promise.all([e.props.fetchExpenses(e.state.month,e.state.year,e.state.sort),e.props.fetchTotals(e.state.month,e.state.year),e.props.fetchAggregate(e.state.month,e.state.year)]);case 3:t.next=6;break;case 5:e.props.fetchExpenses(e.state.month,e.state.year,e.state.sort);case 6:e.setState({loading:!1});case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.renderExpenses=function(){return e.props.expense.expenses?e.props.expense.expenses.map(function(t){return c.a.createElement("div",{className:"card col s6 m4 l2",key:t._id},c.a.createElement("div",{className:"card-content"},c.a.createElement("span",{className:"card-title"},t.type),c.a.createElement("p",null,e.formatDate(t.date)),c.a.createElement("p",null,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t.value)),c.a.createElement("p",{style:{height:"100px",overflow:"auto"}},t.description)),c.a.createElement("div",{className:"card-action"},c.a.createElement("button",{className:"btn-floating red right",style:{marginLeft:"10px"},onClick:function(){return e.onDeleteExpense(t._id)}},c.a.createElement("i",{className:"material-icons right"},"delete")),c.a.createElement(v.b,{to:{pathname:"/expense/edit",state:t},className:"btn-floating red right"},c.a.createElement("i",{className:"material-icons right"},"edit"))))}):""},e.render=function(){return c.a.createElement("div",null,c.a.createElement("div",{className:"row"},c.a.createElement("button",{className:"btn red left",onClick:e.previousMonth},c.a.createElement("i",{className:"material-icons"},"keyboard_arrow_left")),c.a.createElement("button",{className:"btn red right",onClick:e.nextMonth},c.a.createElement("i",{className:"material-icons"},"keyboard_arrow_right")),c.a.createElement("h5",{className:"red-text center"},T()(new Date(e.state.month+"/01/"+e.state.year)).format("MMMM"),", ",e.state.year)),e.state.loading?c.a.createElement("div",{className:"progress"},c.a.createElement("div",{className:"indeterminate"})):null,c.a.createElement("div",{className:e.state.loading?"hide":""},c.a.createElement("div",{className:"row"},c.a.createElement(_,{month:e.state.month,year:e.state.year}),c.a.createElement("div",{className:"input-field col s6 m4 l3"},c.a.createElement("select",{style:{display:"block"},value:e.state.sort,ref:e.sortSelect,onChange:e.sort},c.a.createElement("option",{value:"date asc"},"Date (oldest first)"),c.a.createElement("option",{value:"date desc"},"Date (newest first)"),c.a.createElement("option",{value:"value asc"},"Value (low to high)"),c.a.createElement("option",{value:"value desc"},"Value (high to low)")))),c.a.createElement("div",{className:"row"},c.a.createElement(Y,{month:e.state.month,year:e.state.year})),c.a.createElement("div",{className:"row"},e.renderExpenses(),c.a.createElement("div",{className:"fixed-action-btn"},c.a.createElement(v.b,{to:"/expense/new",className:"btn-floating btn-large red right"},c.a.createElement("i",{className:"material-icons"},"add"))))))},e.sortSelect=c.a.createRef(),e.filterSelect=c.a.createRef(),e.state={month:(new Date).getMonth()+1,year:(new Date).getFullYear(),sort:"date desc",loading:!1},e}return Object(h.a)(t,e),t}(r.Component);var U=Object(l.b)(function(e){return{expense:e.expense}},{fetchExpenses:O,fetchTotals:k,fetchAggregate:N,deleteExpense:j})(F),I=function(){return c.a.createElement("div",null,c.a.createElement(U,null))},P=a(495),R=a(496),z=a(177),B=a(175),J=a.n(B),V=a(176),q=a.n(V),L=a(50),G=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(d.a)(this,Object(f.a)(t).call(this))).componentDidMount=function(){e.props.fetchTypes()},e.componentDidUpdate=function(){J.a.AutoInit()},e.onDialogOpen=function(){e.setState({open:!0})},e.onDialogClose=function(){e.setState({open:!1})},e.onAddType=Object(E.a)(g.a.mark(function t(){var a;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a=document.getElementById("typeName").value)){t.next=5;break}return t.next=4,e.props.addType(a);case 4:e.props.fetchTypes();case 5:e.setState({open:!1});case 6:case"end":return t.stop()}},t,this)})),e.renderAddTypeForm=function(){return c.a.createElement(L.b,{open:e.state.open},c.a.createElement(L.e,null,"Add Type"),c.a.createElement(L.d,null,c.a.createElement("input",{type:"text",id:"typeName",autoComplete:"off"})),c.a.createElement(L.c,null,c.a.createElement(L.a,{onClick:e.onDialogClose},"Cancel"),c.a.createElement(L.a,{onClick:e.onAddType},"Add")))},e.renderOptions=function(){return q.a.map(e.props.types,function(e){var t=e.name;return c.a.createElement("option",{key:t,value:t},t)})},e.render=function(){return c.a.createElement("div",null,e.renderAddTypeForm(),c.a.createElement("div",{className:"row"},c.a.createElement("div",{style:{padding:"0"},className:"input-field col s3"},c.a.createElement("select",e.props.input,c.a.createElement("option",{value:""},"Select a type"),e.renderOptions()),e.props.meta.touched&&e.props.meta.error&&c.a.createElement("div",null,c.a.createElement("span",{className:"red-text"},e.props.meta.error))),c.a.createElement("button",{style:{position:"relative",top:"25px",left:"20px"},className:"btn left red",onClick:e.onDialogOpen,type:"button"},"Add type",c.a.createElement("i",{className:"material-icons left"},"add"))))},e.state={open:!1},e}return Object(h.a)(t,e),t}(r.Component);var H=Object(l.b)(function(e){return{types:e.types}},{fetchTypes:D,addType:S})(G),K=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(d.a)(this,Object(f.a)(t).call(this))).componentDidMount=function(){var t={};e.props.expense?(t=e.props.expense).date=T()(t.date).format("MM-DD-YYYY"):t.date=X(new Date),e.props.initialize(t)},e.onDialogOpen=function(){e.setState({open:!0})},e.onDialogClose=function(){e.setState({open:!1})},e.renderFields=function(){return c.a.createElement("div",null,c.a.createElement(R.a,{key:"value",name:"value",label:"Amount",type:"number",component:Q}),c.a.createElement(R.a,{key:"type",name:"type",label:"Type",component:H,onDialogOpen:e.onDialogOpen}),c.a.createElement(R.a,{key:"date",name:"date",label:"Date",component:W}),c.a.createElement(R.a,{key:"description",name:"description",label:"Description",component:Q}))},e.render=function(){return c.a.createElement("div",null,c.a.createElement("form",{onSubmit:e.props.handleSubmit(e.props.onExpenseSubmit)},e.renderFields(),c.a.createElement(v.b,{style:{marginTop:"20px",zIndex:"-1"},to:"/",className:"btn waves-effect waves-light white-text left red"},"Cancel",c.a.createElement("i",{className:"material-icons left"},"cancel")),c.a.createElement("button",{style:{marginTop:"20px"},className:"btn waves-effect waves-light white-text right red",type:"submit"},"Submit",c.a.createElement("i",{className:"material-icons left"},"send"))))},e.state={open:!1},e}return Object(h.a)(t,e),t}(r.Component),Q=function(e){var t=e.input,a=e.label,n=e.type,r=void 0===n?"text":n,s=e.meta,o=s.touched,l=s.error;return c.a.createElement("div",null,c.a.createElement("label",null,a),c.a.createElement("input",Object.assign({},t,{type:r,autoComplete:"off"})),o&&l&&c.a.createElement("span",{className:"red-text"},l))},W=function(e){var t=e.input,a=e.meta,n=a.touched,r=a.error;return c.a.createElement("div",null,c.a.createElement(z.a,Object.assign({},t,{selected:t.value?new Date(Date.parse(t.value)):new Date,value:t.value?X(t.value):X(new Date),placeholderText:"Select a date",dateFormat:"MM-dd-YYYY",autoComplete:"off"})),n&&r&&c.a.createElement("div",null,c.a.createElement("span",{className:"red-text"},r)))},X=function(e){if("string"==typeof e)return e;var t=T()(e).toDate();return T()(t).format("MM-DD-YYYY")},Z=Object(P.a)({validate:function(e){var t={};return e.value||(t.value="Please specify an amount"),e.type||(t.type="Please select a type"),e.date||(t.date="Please specify a date"),t},form:"expenseForm"})(K),$=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"submitExpense",value:function(){var e=Object(E.a)(g.a.mark(function e(t){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.put("/api/expense",t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),alert("Something bad happened! "+e.t0);case 8:this.props.history.push("/");case 9:case"end":return e.stop()}},e,this,[[0,5]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return c.a.createElement("div",null,c.a.createElement("h5",{className:"red-text"},"Create a new expense"),c.a.createElement(Z,{onExpenseSubmit:function(t){return e.submitExpense(t)}}))}}]),t}(r.Component),ee=Object(P.a)({form:"expenseForm"})($),te=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"updateExpense",value:function(){var e=Object(E.a)(g.a.mark(function e(t){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.post("/api/expense/"+t._id,t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),alert("Something bad happened! "+e.t0);case 8:this.props.history.push("/");case 9:case"end":return e.stop()}},e,this,[[0,5]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return c.a.createElement("div",null,c.a.createElement("h5",{className:"red-text"},"Edit expense"),c.a.createElement(Z,{onExpenseSubmit:function(t){return e.updateExpense(t)},expense:this.props.location.state}))}}]),t}(r.Component),ae=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return c.a.createElement(v.a,null,c.a.createElement("div",{className:"container"},c.a.createElement(y.a,{path:"/",exact:!0,component:I}),c.a.createElement(y.a,{path:"/expense/new",component:ee}),c.a.createElement(y.a,{path:"/expense/edit",component:te})))}}]),t}(r.Component),ne=Object(l.b)(null,n)(ae),re=a(497),ce=Object(i.c)({expense:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"fetch_expenses":return t.payload;default:return e}},totals:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"fetch_totals":return t.payload;default:return e}},form:re.a,types:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"fetch_types":return t.payload;default:return e}},aggregate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"fetch_aggregate":return t.payload;default:return e}}}),se=Object(i.d)(ce,{},Object(i.a)(u.a));o.a.render(c.a.createElement(l.a,{store:se}," ",c.a.createElement(ne,null)," "),document.querySelector("#root"))}},[[271,1,2]]]);
//# sourceMappingURL=main.af23fe05.chunk.js.map